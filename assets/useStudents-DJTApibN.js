import{e as L,r as a,a as A}from"./index-B1GdCpt6.js";import{f as B,a as $,b,c as q,d as R,u as T}from"./studentService-Jyc_TnmW.js";const j=i=>{const{setIsLoading:f,setLoadingText:h}=L(),[o,y]=a.useState([]),[g,m]=a.useState(),[u,d]=a.useState(!0),[E,r]=a.useState(null),{showNotification:s}=A();a.useEffect(()=>{i&&h(i),f(u)},[u,f]);const n=async()=>{try{d(!0);const t=await B();y(t)}catch{r("Error loading students")}finally{d(!1)}},p=async t=>{try{if(!t){console.error("Student ID is null or undefined");return}d(!0);const e=await $(t);console.log("studentData",e),m(e)}catch{r("Error loading student"),s("Error loading student","error"),console.error(`Error loading student ${t}`)}finally{d(!1)}};a.useEffect(()=>{n()},[]);const v=async t=>{try{if(!S(t))return;await b(t),s("Element added","success"),n()}catch{r("Error adding the student")}},N=async t=>{try{const e=t.filter(c=>!o.some(I=>I.fullName===c.fullName));if(e.length===0){s("All students already exist","error");return}if(e.filter(c=>!S(c)).length>0){s("Some students have invalid data","error");return}await q(e),s(`${e.length} elements added`,"success"),n()}catch(e){console.error("Error adding students:",e),r("Error adding students")}},w=async t=>{try{await R(t),n()}catch{r("Error deleting the student")}},x=async(t,e)=>{try{await T(t,e),n()}catch{r("Error updating the student")}},D=t=>typeof t>"u"||t.trim()===""?!1:/\S+@\S+\.\S+/.test(t),S=t=>o.some(l=>l.fullName===t.fullName)?(s("The student already exists","error"),!1):!t.fullName||!D(t.email)?(s("Invalid student data","error"),!1):!0;return{students:o,student:g,loadStudents:n,loadStudent:p,loading:u,error:E,handleAddStudent:v,handleAddStudents:N,handleRemoveStudent:w,handleUpdateStudent:x}};export{j as u};
