import{r as i,j as e,L as g,d as b}from"./index-CjQusIVV.js";const y=({onItemAdded:s,fields:o,initialData:r})=>{const[t,c]=i.useState({});i.useEffect(()=>{r&&c(r)},[r]);const n=a=>{const{name:m,value:u}=a.target;c({...t,[m]:u})},d=async a=>{a.preventDefault(),await s(t),c({})};return e.jsxs("form",{onSubmit:d,children:[o.map(a=>e.jsx("input",{type:"text",name:a.name,placeholder:a.placeholder,value:t[a.name]||"",onChange:n,required:!0},a.name)),e.jsx("button",{type:"submit",children:"Agregar"})]})},E=({items:s,fields:o,onItemDeleted:r,loading:t})=>{const c=async n=>{n!==""&&r(n)};return t?e.jsx(g,{}):e.jsxs("table",{className:"list-base-table",children:[s&&s.length!==0&&e.jsx("thead",{children:e.jsxs("tr",{children:[o.map(n=>e.jsx("th",{children:n.placeholder||n.name},n.name)),e.jsx("th",{children:"Acciones"})," "]})}),s&&s.length!==0&&e.jsx("tbody",{children:s.map(n=>e.jsxs("tr",{children:[o.map(d=>e.jsx("td",{children:n[d.name]},d.name)),e.jsx("td",{children:e.jsx("button",{className:"delete-button",onClick:()=>c(n.id),children:"Eliminar"})})]},n.id))})]})},N=({title:s,fields:o,fetchItems:r,onItemAdded:t,onItemDeleted:c,importItem:n,initialFormData:d,loading:a,children:m})=>{const[u,j]=i.useState([]),{showNotification:x}=b(),h=async()=>{const l=await r();j(l)},p=async l=>{await t(l),h(),x("Elemento Importado","info")},f=async l=>{await t(l),h(),x("Elemento importado","info")};return i.useEffect(()=>{h()},[]),i.useEffect(()=>{n&&(console.log("Importing item",n),d=n,f(n))},[n]),e.jsxs("div",{children:[s&&e.jsx("h2",{children:s}),e.jsxs("div",{className:"module-container",children:[e.jsxs("div",{className:"form-container",children:[e.jsx(y,{onItemAdded:p,fields:o,initialData:d??n}),e.jsx(E,{items:u,fields:o,onItemDeleted:async l=>{c&&await c(l),h()},loading:a||!1})]}),e.jsx("div",{className:"upload-container",children:m})]})]})};export{N as B};
