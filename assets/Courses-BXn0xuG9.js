import{f as C,h as i,i as y,k as g,l as f,m as D,n as x,r as u,j as a,L as E}from"./index-xBWYQws9.js";import{B as w}from"./BaseModule-aTlGCpHK.js";import{f as j}from"./teacherService-CuJ_d_AM.js";const S=async()=>{const e=C(i,"courses");return(await y(e)).docs.map(o=>({id:o.id,...o.data()}))},T=async e=>{const t=C(i,"courses");await g(t,e)},I=async e=>{const t=f(i,"courses",e);await D(t)},L=async(e,t)=>{const d=f(i,"courses",e);await x(d,t)},v=()=>{const[e,t]=u.useState([]),[d,o]=u.useState(!0),[l,c]=u.useState(null),n=async()=>{try{o(!0);const s=await S();return t(s),s}catch{return c("Error fetching courses"),[]}finally{o(!1)}};return u.useEffect(()=>{n()},[]),{courses:e,loadCourses:n,loading:d,error:l,setError:c,handleAddCourse:async s=>{try{await T(s),n()}catch{c("Error adding course")}},handleDeleteCourse:async s=>{try{await I(s),n()}catch{c("Error deleting course")}},handleUpdateCourse:async(s,r)=>{try{await L(s,r),n()}catch{c("Error updating course")}}}},A=()=>{const[e,t]=u.useState([]),{loadCourses:d,loading:o,error:l,setError:c,handleAddCourse:n,handleDeleteCourse:h,handleUpdateCourse:m}=v(),p=[{name:"title",placeholder:"Course Title"},{name:"description",placeholder:"Course Description"},{name:"duration",placeholder:"Duration (hours)"},{name:"teacherId",label:"Teacher",placeholder:"Select Teacher",type:"select",options:e.map(r=>({value:r.id,label:r.name}))}],s=async()=>{try{const r=await j();t(r)}catch{c("Error fetching teachers")}};return u.useEffect(()=>{s()},[]),a.jsxs(a.Fragment,{children:[a.jsx(w,{collectionName:"courses",title:"Course Management",fields:p,fetchItems:d,onItemAdded:async r=>{await n(r)},onItemDeleted:h,onItemUpdated:m,loading:o}),o&&a.jsx("div",{className:"loading",children:a.jsx(E,{})})," ",l&&a.jsx("div",{className:"error",children:l})," "]})},N=()=>a.jsx("div",{children:a.jsx(A,{})});export{N as default};
