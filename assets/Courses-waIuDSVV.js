import{f as C,h as l,i as m,k as f,l as p,m as y,n as g,r as d,o as D,j as n,B as w}from"./index-CuDWPEkk.js";const x=async()=>{const e=C(l,"courses");return(await m(e)).docs.map(o=>({id:o.id,...o.data()}))},E=async e=>{const s=C(l,"courses");await f(s,e)},j=async e=>{const s=p(l,"courses",e);await y(s)},L=async(e,s)=>{const{id:t,...o}=s,u=p(l,"courses",e);await g(u,o)},S=()=>{const[e,s]=d.useState([]),[t,o]=d.useState(!0),[u,a]=d.useState(null),c=async()=>{try{o(!0);const r=await x();return s(r),r}catch{return a("Error fetching courses"),[]}finally{o(!1)}};return d.useEffect(()=>{c()},[]),{courses:e,loadCourses:c,loading:t,error:u,setError:a,handleAddCourse:async r=>{try{await E(r),c()}catch{a("Error adding course")}},handleDeleteCourse:async r=>{try{await j(r),c()}catch{a("Error deleting course")}},handleUpdateCourse:async(r,i)=>{try{await L(r,i),c()}catch{a("Error updating course")}}}},A=()=>{const{setIsLoading:e}=D(),{courses:s,loading:t,error:o,handleAddCourse:u,handleDeleteCourse:a,handleUpdateCourse:c}=S();d.useEffect(()=>{e(t)},[t,e]);const h=[{name:"name",placeholder:"Course name"},{name:"description",placeholder:"Course description"},{name:"duration",placeholder:"Duration (weeks)"},{name:"hours",placeholder:"Hours per week"}];return n.jsxs(n.Fragment,{children:[n.jsx(w,{title:"Course Management",fields:h,items:s,onItemAdded:u,onItemDeleted:a,onItemUpdated:c,loading:t}),o&&n.jsx("div",{className:"error",children:o})," "]})},v=()=>n.jsx("div",{children:n.jsx(A,{})});export{v as default};
