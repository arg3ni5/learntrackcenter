import{f as C,h as i,i as y,k as g,l as f,m as w,n as D,r as d,j as l}from"./index-CQ0z7sHe.js";import{B as E}from"./BaseModule-QSwRK5lx.js";import{f as T,a as x,d as S}from"./teacherService-B8SYD3Qx.js";const j=async()=>{const e=C(i,"courses");return(await y(e)).docs.map(s=>({id:s.id,...s.data()}))},A=async e=>{const r=C(i,"courses");await g(r,e)},I=async e=>{const r=f(i,"courses",e);await w(r)},L=async(e,r)=>{const{id:c,...s}=r,u=f(i,"courses",e);await D(u,s)},U=()=>{const[e,r]=d.useState([]),[c,s]=d.useState(!0),[u,a]=d.useState(null),t=async()=>{try{s(!0);const o=await j();return r(o),o}catch{return a("Error fetching courses"),[]}finally{s(!1)}};return d.useEffect(()=>{t()},[]),{courses:e,loadCourses:t,loading:c,error:u,setError:a,handleAddCourse:async o=>{try{await A(o),t()}catch{a("Error adding course")}},handleDeleteCourse:async o=>{try{await I(o),t()}catch{a("Error deleting course")}},handleUpdateCourse:async(o,m)=>{try{await L(o,m),t()}catch{a("Error updating course")}}}},b=()=>{const[e,r]=d.useState([]),[c,s]=d.useState(!0),[u,a]=d.useState(null),t=async()=>{try{s(!0);const n=await T();return r(n),n}catch{return a("Error fetching teachers"),[]}finally{s(!1)}};return d.useEffect(()=>{t()},[]),{teachers:e,loadTeachers:t,loading:c,error:u,handleAddTeacher:async n=>{try{await x(n),t()}catch{a("Error adding teacher")}},handleDeleteTeacher:async n=>{try{await S(n),t()}catch{a("Error deleting teacher")}}}},k=()=>{const{courses:e,loading:r,error:c,handleAddCourse:s,handleDeleteCourse:u,handleUpdateCourse:a}=U(),{teachers:t}=b(),p=[{name:"name",placeholder:"Course name"},{name:"description",placeholder:"Course description"},{name:"duration",placeholder:"Duration (weeks)"},{name:"hours",placeholder:"Hours per week"},{name:"teacherId",label:"Teacher",placeholder:"Select Teacher",type:"select",options:t.map(h=>({value:h.id,label:h.name}))}];return l.jsxs(l.Fragment,{children:[l.jsx(E,{title:"Course Management",fields:p,items:e,onItemAdded:s,onItemDeleted:u,onItemUpdated:a,loading:r}),c&&l.jsx("div",{className:"error",children:c})," "]})},H=()=>l.jsx("div",{children:l.jsx(k,{})});export{H as default};
