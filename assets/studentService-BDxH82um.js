import{d as e}from"./index-Cui4C6id.js";import{c as r,d as I,w as y,e as i,b as l,m as g,f as C,u as b,q as S,p as u}from"./vendor-firebase-CpkMzyVB.js";const P=async s=>{const t=r(e,"students");await I(t,s)},B=async s=>{const t=y(e),n=r(e,"students");s.forEach(a=>{const c=i(n);t.set(c,a)});try{await t.commit()}catch(a){throw console.error("Error committing batch:",a),new Error("Error adding students")}},x=async()=>{const s=r(e,"students");return(await l(s)).docs.map(n=>({id:n.id,fullName:n.data().fullName,identificationNumber:n.data().identificationNumber,email:n.data().email}))},h=async s=>{try{const t=i(e,"students",s),n=await g(t);return n.exists()?{id:n.id,...n.data()}:(console.log("No such document!"),null)}catch(t){throw console.error("Error fetching student:",t),t}},R=async s=>{const t=i(e,"students",s);await C(t)},_=async(s,t)=>{const{id:n,...a}=t,c=i(e,"students",s);await b(c,a)},j=async(s,t)=>{const n=r(e,"enrollments"),a=S(n,u("periodId","==",s),u("courseId","==",t)),m=(await l(a)).docs.map(d=>d.data().studentId).map(d=>h(d));return(await Promise.all(m)).filter(d=>d!==null)},k=async(s,t)=>{const n=r(e,"students"),c=(await l(n)).docs.map(o=>o.id),p=r(e,"enrollments"),m=S(p,u("periodId","==",s),u("courseId","==",t)),d=(await l(m)).docs.map(o=>o.data().studentId),w=c.filter(o=>!d.includes(o)).map(o=>h(o));return(await Promise.all(w)).filter(o=>o!==null)};export{h as a,P as b,B as c,R as d,k as e,x as f,j as g,_ as u};
