import{r as h,j as e,h as u,f as j,i as p}from"./index-MpNMWhcj.js";const b=({onItemAdded:s,fields:o,initialData:n})=>{const[r,c]=h.useState({});h.useEffect(()=>{n&&c(n)},[n]);const d=t=>{const{name:m,value:i}=t.target;c({...r,[m]:i})},a=async t=>{t.preventDefault(),await s(r),c({})};return e.jsxs("form",{onSubmit:a,children:[o.map(t=>e.jsx("input",{type:"text",name:t.name,placeholder:t.placeholder,value:r[t.name]||"",onChange:d,required:!0},t.name)),e.jsx("button",{type:"submit",children:"Agregar"})]})},g=({items:s,collectionName:o,fields:n,onItemDeleted:r,loading:c})=>{const d=async a=>{await u(j(p,o,a)),r(a)};return c?e.jsx("div",{className:"loading",children:"Cargando..."}):e.jsxs("table",{className:"list-base-table",children:[s&&s.length!==0&&e.jsx("thead",{children:e.jsxs("tr",{children:[n.map(a=>e.jsx("th",{children:a.placeholder||a.name},a.name)),e.jsx("th",{children:"Acciones"})," "]})}),s&&s.length!==0&&e.jsx("tbody",{children:s.map(a=>e.jsxs("tr",{children:[n.map(t=>e.jsx("td",{children:a[t.name]},t.name)),e.jsx("td",{children:e.jsx("button",{className:"delete-button",onClick:()=>d(a.id),children:"Eliminar"})})]},a.id))})]})},I=({collectionName:s,title:o,fields:n,fetchItems:r,onItemAdded:c,onItemDeleted:d,initialFormData:a,loading:t})=>{const[m,i]=h.useState([]),x=async()=>{const l=await r();i(l)};return h.useEffect(()=>{x()},[]),e.jsxs("div",{children:[o&&e.jsx("h2",{children:o}),e.jsx(b,{onItemAdded:async l=>{await c(l),x()},fields:n,initialData:a}),e.jsx(g,{items:m,collectionName:s,fields:n,onItemDeleted:async l=>{d&&await d(l),x()},loading:t||!1})]})};export{I as B};
