import{r as a}from"./vendor-react-BWjxQFbR.js";import{f as L,a as A,b as B,c as $,d as b,u as q}from"./studentService-BDxH82um.js";import{c as R,u as T}from"./index-Cui4C6id.js";const k=i=>{const{setIsLoading:f,setLoadingText:h}=R(),[o,m]=a.useState([]),[y,g]=a.useState(),[u,d]=a.useState(!0),[E,s]=a.useState(null),{showNotification:r}=T();a.useEffect(()=>{i&&h(i),f(u)},[u,f]);const n=async()=>{try{d(!0);const t=await L();m(t)}catch{s("Error loading students")}finally{d(!1)}},p=async t=>{try{if(!t){console.error("Student ID is null or undefined");return}d(!0);const e=await A(t);console.log("studentData",e),g(e)}catch{s("Error loading student"),r("Error loading student","error"),console.error(`Error loading student ${t}`)}finally{d(!1)}};a.useEffect(()=>{n()},[]);const v=async t=>{try{if(!S(t))return;await B(t),r("Element added","success"),n()}catch{s("Error adding the student")}},N=async t=>{try{const e=t.filter(c=>!o.some(I=>I.fullName===c.fullName));if(e.length===0){r("All students already exist","error");return}if(e.filter(c=>!S(c)).length>0){r("Some students have invalid data","error");return}await $(e),r(`${e.length} elements added`,"success"),n()}catch(e){console.error("Error adding students:",e),s("Error adding students")}},w=async t=>{try{await b(t),n()}catch{s("Error deleting the student")}},x=async(t,e)=>{try{await q(t,e),n()}catch{s("Error updating the student")}},D=t=>typeof t>"u"||t.trim()===""?!1:/\S+@\S+\.\S+/.test(t),S=t=>o.some(l=>l.fullName===t.fullName)?(r("The student already exists","error"),!1):!t.fullName||!D(t.email)?(r("Invalid student data","error"),!1):!0;return{students:o,student:y,loadStudents:n,loadStudent:p,loading:u,error:E,handleAddStudent:v,handleAddStudents:N,handleRemoveStudent:w,handleUpdateStudent:x}};export{k as u};
