import{f as m,h as i,i as y,k as g,l as f,m as D,n as x,r as u,j as a,L as E}from"./index-D4yMUOb2.js";import{B as j}from"./BaseModule-D2lKYpIr.js";import{f as w}from"./teacherService-C008qovd.js";const S=async()=>{const e=m(i,"courses");return(await y(e)).docs.map(t=>({id:t.id,...t.data()}))},T=async e=>{const r=m(i,"courses");await g(r,e)},I=async e=>{const r=f(i,"courses",e);await D(r)},L=async(e,r)=>{const{id:l,...t}=r,d=f(i,"courses",e);await x(d,t)},v=()=>{const[e,r]=u.useState([]),[l,t]=u.useState(!0),[d,c]=u.useState(null),n=async()=>{try{t(!0);const s=await S();return r(s),s}catch{return c("Error fetching courses"),[]}finally{t(!1)}};return u.useEffect(()=>{n()},[]),{courses:e,loadCourses:n,loading:l,error:d,setError:c,handleAddCourse:async s=>{try{await T(s),n()}catch{c("Error adding course")}},handleDeleteCourse:async s=>{try{await I(s),n()}catch{c("Error deleting course")}},handleUpdateCourse:async(s,o)=>{try{await L(s,o),n()}catch{c("Error updating course")}}}},A=()=>{const[e,r]=u.useState([]),{loadCourses:l,loading:t,error:d,setError:c,handleAddCourse:n,handleDeleteCourse:h,handleUpdateCourse:p}=v(),C=[{name:"title",placeholder:"Course Title"},{name:"description",placeholder:"Course Description"},{name:"duration",placeholder:"Duration (hours)"},{name:"teacherId",label:"Teacher",placeholder:"Select Teacher",type:"select",options:e.map(o=>({value:o.id,label:o.name}))}],s=async()=>{try{const o=await w();r(o)}catch{c("Error fetching teachers")}};return u.useEffect(()=>{s()},[]),a.jsxs(a.Fragment,{children:[a.jsx(j,{title:"Course Management",fields:C,fetchItems:l,onItemAdded:n,onItemDeleted:h,onItemUpdated:p,loading:t}),t&&a.jsx("div",{className:"loading",children:a.jsx(E,{})})," ",d&&a.jsx("div",{className:"error",children:d})," "]})},B=()=>a.jsx("div",{children:a.jsx(A,{})});export{B as default};
