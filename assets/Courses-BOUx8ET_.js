import{f as C,h,i as y,k as g,l as f,m as E,n as w,r as d,o as D,j as l}from"./index-BpeKn4Md.js";import{B as T}from"./BaseModule-Ciiuzk2t.js";import{f as x,a as S,d as j}from"./teacherService-BjRie1WD.js";const A=async()=>{const e=C(h,"courses");return(await y(e)).docs.map(s=>({id:s.id,...s.data()}))},L=async e=>{const r=C(h,"courses");await g(r,e)},I=async e=>{const r=f(h,"courses",e);await E(r)},U=async(e,r)=>{const{id:n,...s}=r,u=f(h,"courses",e);await w(u,s)},b=()=>{const[e,r]=d.useState([]),[n,s]=d.useState(!0),[u,a]=d.useState(null),t=async()=>{try{s(!0);const c=await A();return r(c),c}catch{return a("Error fetching courses"),[]}finally{s(!1)}};return d.useEffect(()=>{t()},[]),{courses:e,loadCourses:t,loading:n,error:u,setError:a,handleAddCourse:async c=>{try{await L(c),t()}catch{a("Error adding course")}},handleDeleteCourse:async c=>{try{await I(c),t()}catch{a("Error deleting course")}},handleUpdateCourse:async(c,m)=>{try{await U(c,m),t()}catch{a("Error updating course")}}}},k=()=>{const[e,r]=d.useState([]),[n,s]=d.useState(!0),[u,a]=d.useState(null),t=async()=>{try{s(!0);const o=await x();return r(o),o}catch{return a("Error fetching teachers"),[]}finally{s(!1)}};return d.useEffect(()=>{t()},[]),{teachers:e,loadTeachers:t,loading:n,error:u,handleAddTeacher:async o=>{try{await S(o),t()}catch{a("Error adding teacher")}},handleDeleteTeacher:async o=>{try{await j(o),t()}catch{a("Error deleting teacher")}}}},v=()=>{const{setIsLoading:e}=D(),{courses:r,loading:n,error:s,handleAddCourse:u,handleDeleteCourse:a,handleUpdateCourse:t}=b(),{teachers:i}=k();d.useEffect(()=>{e(n)},[n,e]);const p=[{name:"name",placeholder:"Course name"},{name:"description",placeholder:"Course description"},{name:"duration",placeholder:"Duration (weeks)"},{name:"hours",placeholder:"Hours per week"},{name:"teacherId",label:"Teacher",placeholder:"Select Teacher",type:"select",options:i.map(o=>({value:o.id,label:o.name}))}];return l.jsxs(l.Fragment,{children:[l.jsx(T,{title:"Course Management",fields:p,items:r,onItemAdded:u,onItemDeleted:a,onItemUpdated:t,loading:n}),s&&l.jsx("div",{className:"error",children:s})," "]})},N=()=>l.jsx("div",{children:l.jsx(v,{})});export{N as default};
