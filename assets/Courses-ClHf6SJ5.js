import{f as C,h as i,i as y,k as g,l as f,m as w,n as D,r as u,j as d,L as E}from"./index-Cl8Z4pzY.js";import{B as T}from"./BaseModule-C_D0Q7-X.js";import{f as x,a as j,d as S}from"./teacherService-GcO_zlDW.js";const A=async()=>{const e=C(i,"courses");return(await y(e)).docs.map(r=>({id:r.id,...r.data()}))},L=async e=>{const s=C(i,"courses");await g(s,e)},I=async e=>{const s=f(i,"courses",e);await w(s)},v=async(e,s)=>{const{id:c,...r}=s,l=f(i,"courses",e);await D(l,r)},U=()=>{const[e,s]=u.useState([]),[c,r]=u.useState(!0),[l,a]=u.useState(null),t=async()=>{try{r(!0);const o=await A();return s(o),o}catch{return a("Error fetching courses"),[]}finally{r(!1)}};return u.useEffect(()=>{t()},[]),{courses:e,loadCourses:t,loading:c,error:l,setError:a,handleAddCourse:async o=>{try{await L(o),t()}catch{a("Error adding course")}},handleDeleteCourse:async o=>{try{await I(o),t()}catch{a("Error deleting course")}},handleUpdateCourse:async(o,m)=>{try{await v(o,m),t()}catch{a("Error updating course")}}}},b=()=>{const[e,s]=u.useState([]),[c,r]=u.useState(!0),[l,a]=u.useState(null),t=async()=>{try{r(!0);const n=await x();return s(n),n}catch{return a("Error fetching teachers"),[]}finally{r(!1)}};return u.useEffect(()=>{t()},[]),{teachers:e,loadTeachers:t,loading:c,error:l,handleAddTeacher:async n=>{try{await j(n),t()}catch{a("Error adding teacher")}},handleDeleteTeacher:async n=>{try{await S(n),t()}catch{a("Error deleting teacher")}}}},k=()=>{const{loadCourses:e,loading:s,error:c,handleAddCourse:r,handleDeleteCourse:l,handleUpdateCourse:a}=U(),{teachers:t}=b(),p=[{name:"name",placeholder:"Course name"},{name:"description",placeholder:"Course description"},{name:"duration",placeholder:"Duration (weeks)"},{name:"hours",placeholder:"Hours per week"},{name:"teacherId",label:"Teacher",placeholder:"Select Teacher",type:"select",options:t.map(h=>({value:h.id,label:h.name}))}];return d.jsxs(d.Fragment,{children:[d.jsx(T,{title:"Course Management",fields:p,fetchItems:e,onItemAdded:r,onItemDeleted:l,onItemUpdated:a,loading:s}),s&&d.jsx("div",{className:"loading",children:d.jsx(E,{})})," ",c&&d.jsx("div",{className:"error",children:c})," "]})},H=()=>d.jsx("div",{children:d.jsx(k,{})});export{H as default};
